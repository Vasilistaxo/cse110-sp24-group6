<!DOCTYPE html>
<html>
<head>
  <title>To-Do List</title>
  <link rel="stylesheet" href="assets/styles/todolist.css">
</head>
<body>
  <div class="nav-bar-left-container">
    <nav class="nav-bar">
        <img class="databaes-icon" src="assets/HTML_homepage_pics/databaes_logo.png" alt="databaes logo"/>
        <a id="home-page-button" class="page-icons" href="./homepage.html">
            <img class="home-icon" src="assets/HTML_homepage_pics/homepage_nav.png" alt="Homepage button"/>
        </a>
        <a id="daily-log-button" class="page-icons" href="./dailylog.html">
            <img class="daily-log-icon" src="assets/icons/homepage/daily_log/daily_log_green.png" alt="Daily Log Button"/>
        </a>
        <a id="to-do-list-button" class="page-icons" href="./todolist.html">
            <img class="to-do-list-icon" src="assets/HTML_homepage_pics/to-do_list_nav.png" alt="To-Do List button"/>
        </a>
    </nav>
  </div>
  <h1>To-Do List</h1>
  
  <div id="progress-container">
    <div id="progress-text"></div>
    <div id="progress-bar"></div>
    <img src="assets/icons/otter.png" id="otter" alt="Otter">
    <img src="assets/icons/fish.png" id="fish" alt="Fish">
    <img src="assets/icons/celebration.png" id="celebration" alt="Celebrating Otter">
  </div>
  
  <h2>Add a Task</h2>
  <form id="task-form">
    <input type="text" id="task-input" placeholder="Enter task">
    <input type="date" id="due-date">
    <input type="text" id="task-description" placeholder="Enter task description">
    <select id="task-tags">
      <option value="Project">Project</option>
      <option value="Learning">Learning</option>
      <option value="Misc">Misc</option>
      <option value="Fun">Fun</option>
      <option value="Debugging">Debugging</option>
    </select>
    <button type="submit">Add Task</button>
  </form>
  
  <ul id="task-list"></ul>
  
  <button id="delete-all">Delete All Tasks</button>
  
  <script>
    const taskForm = document.getElementById('task-form');
    const taskInput = document.getElementById('task-input');
    const dueDate = document.getElementById('due-date');
    const taskDescription = document.getElementById('task-description');
    const taskTags = document.getElementById('task-tags');
    const taskList = document.getElementById('task-list');
    const deleteAllBtn = document.getElementById('delete-all');
    const progressText = document.getElementById('progress-text');
    const progressBar = document.getElementById('progress-bar');
    const otter = document.getElementById('otter');
    const fish = document.getElementById('fish');
    const celebration = document.getElementById('celebration');

    function updateProgress() {
      const tasks = taskList.children;
      const totalTasks = tasks.length;
      let completedTasks = 0;

      for (let task of tasks) {
        if (task.querySelector('input[type="checkbox"]').checked) {
          completedTasks++;
        }
      }

      const progress = totalTasks ? (completedTasks / totalTasks) * 100 : 0;
      progressText.textContent = `Progress: ${progress.toFixed(2)}% (${completedTasks}/${totalTasks})`;
      progressBar.style.width = progress + '%';
      otter.style.left = progress + '%';

      if (progress === 100) {
        otter.style.display = 'none';
        fish.style.display = 'none';
        celebration.style.display = 'block';
      } else {
        otter.style.display = 'block';
        fish.style.display = 'block';
        celebration.style.display = 'none';
      }
    }

    function deleteTask(event) {
      event.target.parentNode.remove();
      updateProgress();
    }

    taskForm.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const task = taskInput.value;
      const date = dueDate.value;
      const description = taskDescription.value;
      const tag = taskTags.value;
      
      if (task) {
        const li = document.createElement('li');
        const checkbox = document.createElement('input');
        const deleteButton = document.createElement('button');
        
        checkbox.type = 'checkbox';
        deleteButton.textContent = 'Delete';
        deleteButton.addEventListener('click', deleteTask);
        checkbox.addEventListener('change', updateProgress);
        
        li.innerHTML = `
          <b>Task:</b> ${task} <br>
          <b>Due Date:</b> ${date} <br>
          <b>Description:</b> ${description} <br>
          <b>Tag:</b> ${tag} <br>
        `;
        
        li.appendChild(checkbox);
        li.appendChild(deleteButton);
        taskList.appendChild(li);
        
        taskInput.value = '';
        dueDate.value = '';
        taskDescription.value = '';
        taskTags.value = '';
        
        updateProgress();
        
        // update the progress
        updateProgress();
        
        // reset the form
        taskInput.focus();
        
      
}
    
    deleteAllBtn.addEventListener('click', function() {
      taskList.innerHTML = '';
      
       updateProgress();
      
       // reset the form
       taskInput.focus();
      

      
});
}) </script>
</body>
</html>
